<html window-icon="images/rx.ico" window-frame="extended" window-resizable>
<head>
<title>Minimalistic Sciter demo</title>
<style>
@import url(general.css);
@import url(vgrid.css);
</style>
<script type="text/tiscript">
  include "menubar.tls";
  function refreshMirrors() {
    var future = promise();
    var rqp = { 
      type: #get, 
      url: "http://serverlist.renegade-x.com/servers.jsp", 
      success: function(result, status) {
        var data = new Array(result.length);
        for (var i=0; i<result.length; i++) {
          data[i] = {
            index: i,
            name: result[i].Name,
            map: result[i]["Current Map"],
            players: result[i]["Players"] + "/" + result[i]["Variables"]["Player Limit"],
            latency: "0ms",
          };
        }
        var vlist = $(table);
        vlist.value = data;
        vlist.tbody.currentIndex = 0;
        future(true, data);
      },
      onerror: function(data, status) {
        promise.resolve(false, data);
      },
      returns: true,
    };
    View.request(rqp);
    return future;
  }
  async function self.ready() {
    await refreshMirrors();
  }
</script>
</head>
<body>
<include src="menubar.htm" />
<div id="flow-container">
  <div class="vertical-margin"></div>
  <div class="horizontal-margin"></div>
  <div class="horizontal-margin"></div>
  <div class="vertical-margin"></div>
  <div id="main-content">
    <div #server-container>
      <table resizeable>
        <thead>
          <tr>
            <th(name).sortable>Server Name</th>
            <th(map).sortable>Map</th>
            <th(players)>Players</th>
            <th(latency)>Latency</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td(name)></td>
            <td(map)></td>
            <td(players)></td>
            <td(latency)></td>
          </tr>
        </tbody>
      </table>
      <div #server-info>
        lol
      </div>
    </div>
    <div #chat-container>
      hi there!
      <a href="server-options.htm">click me!</a>
    </div>
  </div>
</div>
</body>
</html>
